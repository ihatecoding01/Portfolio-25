import{a as de}from"https://app.framerstatic.com/chunk-JI56GIBN.mjs";import{a as _}from"https://app.framerstatic.com/chunk-5EBE4XJR.mjs";import"https://app.framerstatic.com/chunk-WQU4PVSP.mjs";import{a as V}from"https://app.framerstatic.com/chunk-4BNDGEUC.mjs";import{e as G,f as v}from"https://app.framerstatic.com/chunk-ZNU6USUP.mjs";import{Y as se,bb as M,kb as ae,ne as b,re as ce}from"https://app.framerstatic.com/chunk-WBF66724.mjs";import"https://app.framerstatic.com/chunk-U7OSQUPW.mjs";import"https://app.framerstatic.com/chunk-ZNY467HO.mjs";import{a as ie}from"https://app.framerstatic.com/chunk-WDSXMPYX.mjs";import{a as T}from"https://app.framerstatic.com/chunk-JVVFM77T.mjs";import{ma as re,oa as ne}from"https://app.framerstatic.com/chunk-SKQHEUKP.mjs";import"https://app.framerstatic.com/chunk-QRYGY2QA.mjs";import"https://app.framerstatic.com/chunk-NZ3T6SXV.mjs";import{a as c}from"https://app.framerstatic.com/chunk-HLURFURU.mjs";import"https://app.framerstatic.com/chunk-4FU7DO35.mjs";import{a as A}from"https://app.framerstatic.com/chunk-BBS2LFMO.mjs";import{d as oe}from"https://app.framerstatic.com/chunk-FFXG44IK.mjs";import{b as te}from"https://app.framerstatic.com/chunk-2L26KV6B.mjs";import{a as C}from"https://app.framerstatic.com/chunk-IJ25RF36.mjs";import{e as r}from"https://app.framerstatic.com/chunk-BQNQQCEJ.mjs";var ee=r(A());var u=r(A());var we=r(A());var pe="button_blajnuz",ue="secondaryButton_s1r4uh58",le="loginButtonText_lbr5chv",me="loginButtonLoading_l13m9aw4",fe="hidden_h1bbhvj1",ge="disabled_d53z8jv";var Ee=r(c()),y=(0,we.forwardRef)(({children:t,variant:e="primary",className:n,testId:o,...i},a)=>(0,Ee.jsx)(ce,{ref:a,className:T(pe,e==="secondary"&&ue,n),variant:"withDepth","data-testid":o,...i,children:t}));var Ie=r(A());var B=r(A());var ye=r(c()),he=(0,B.createContext)(null);function ve({access:t,siteId:e,children:n}){let[o,i]=(0,B.useState)(t),a=(0,B.useCallback)(async()=>{let p=await V(e);i(p)},[e]),s=(0,B.useMemo)(()=>({access:o,refreshEditorBarAccess:a,siteId:e}),[o,a,e]);return(0,B.useEffect)(()=>{G.setUserId(o.userId??"null")},[o.userId]),(0,ye.jsx)(he.Provider,{value:s,children:n})}var I=()=>{let t=(0,B.useContext)(he);if(!t)throw new Error("useAccessData must be used within an AccessDataProvider");return t};var L=r(c());function Ce({siteId:t}){let e=j();_("editor_bar_impression",{page:"editor-bar-cookie-prompt"});async function n(){v("editor_bar_interaction",{page:"editor-bar-cookie-prompt",id:"editor-bar-allow-cookies"});try{await document.requestStorageAccess();let o=await V(t);e(W({access:o,isThankYou:!0,siteId:t}))}catch(o){o instanceof Error&&o.message==="requestStorageAccess not allowed"?e({Component:R,props:{isStorageAccessGranted:!1,isThankYou:!0,siteId:t}}):e({Component:R,props:{isStorageAccessGranted:!1,isThankYou:!1,siteId:t}})}}return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("span",{children:"Additional Cookie Permissions Required"}),(0,L.jsx)(y,{onClick:n,children:"Allow"})]})}var w=r(c());function R({isStorageAccessGranted:t,isThankYou:e=!1,siteId:n}){let o=j(),{refreshEditorBarAccess:i,access:a}=I(),[s,p]=(0,Ie.useState)(null);["unknown","no-auth"].includes(a.status)||o(W({access:a,isThankYou:e,siteId:n}));function d(g){let x=setInterval(async()=>{g.closed&&(clearInterval(x),await i(),p(null))},500)}async function m(g){if(!s)if(v("editor_bar_interaction",{page:"editor-bar-guest-page",id:g==="login"?"editor-bar-login":"editor-bar-signup"}),t||e){let l=window.open(`${C().login}?closeAfterSuccess=true`,"_blank");l&&(d(l),p(g))}else o({Component:Ce,props:{siteId:n}})}return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{children:e?"Thank You!":"Edit in Framer"}),(0,w.jsx)(be,{variant:"secondary",selected:s==="login",disabled:s==="signup",onClick:()=>m("login"),children:"Login"}),(0,w.jsx)(be,{selected:s==="signup",disabled:s==="login",onClick:()=>m("signup"),children:"Signup"})]})}function be({selected:t,onClick:e,children:n,disabled:o,variant:i}){return(0,w.jsxs)(y,{variant:i,className:T(t!==null&&o&&ge),onClick:e,children:[(0,w.jsx)("div",{className:T(le,t&&fe),children:n}),t?(0,w.jsx)("div",{className:me,children:(0,w.jsx)(de,{})}):null]})}var k=r(c());function Pe(){return _("editor_bar_impression",{page:"editor-bar-no-access-page"}),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{children:"To edit, ask the site owner for access"}),(0,k.jsx)(y,{as:"a",href:"https://www.framer.com/help/articles/editor-bar/#why-does-it-say-i-don-t-have-access",rel:"noreferrer noopener",target:"_blank",variant:"secondary",children:"Learn More"})]})}var P=r(A()),Me=r(c()),Ne=(0,P.createContext)("");function Se({children:t}){let[e,n]=(0,P.useState)(new URLSearchParams(window.location.search)?.get("nodeId")??"");return(0,P.useEffect)(()=>{function o(i){typeof i.data!="object"||!i.data||!("apiVersion"in i.data)||i.data.apiVersion===1&&"type"in i.data&&i.data.type==="updateNodeId"&&"nodeId"in i.data&&typeof i.data.nodeId=="string"&&n(i.data.nodeId)}return window.addEventListener("message",o),()=>{window.removeEventListener("message",o)}},[]),(0,Me.jsx)(Ne.Provider,{value:e,children:t})}function $(){return(0,P.useContext)(Ne)}var N=r(c());function Le({access:t,isThankYou:e=!1}){let n=$();_("editor_bar_impression",{page:"editor-bar-project-page"});function o(){v("editor_bar_interaction",{page:"editor-bar-project-page",id:"editor-bar-open-project"}),window.open(`${C().app}/projects/${t.projectSlug}?node=${n}`,"FramerStudio")}return(0,N.jsxs)(N.Fragment,{children:[e?(0,N.jsx)("span",{children:"Thank You!"}):(0,N.jsxs)("span",{children:[t?.permissions?.canEditContent==="on"?"Edit":"View"," in Framer"]}),(0,N.jsx)(y,{variant:"secondary",onClick:o,children:"Open"})]})}var ke="logoButton_l1amlb55",xe="editorBar_e1noknjc",_e="editorBarCircle_e14vtnbc",Re="editorBarWrapper_ewpufyq",Oe="editorBarSubtle_e9jl8lf";var Q=r(c());function We(){return(0,Q.jsx)(b,{direction:"row",alignItems:"center",justifyContent:"center",className:Oe,gap:5,children:(0,Q.jsx)(M,{height:16})})}function D(t){return window.editorBarFeatures[t]}var h=r(A());var O=r(A());var De="container_cxf48gc",X="logo_l3jm2ni",Fe="item_i1zyvor",Ge="highlight_h1y9uq8s",Ve="menuRowText_mh7o0u9",Ue="divider_d1a6q40l";var f=r(c());function H({children:t,highlight:e,onClick:n}){return(0,f.jsx)("button",{type:"button",className:ie(Fe,e&&Ge),onClick:n,children:(0,f.jsx)("span",{className:Ve,children:t})})}function je(){let{setIsMenuOpen:t}=z(),{access:e,refreshEditorBarAccess:n}=I(),o=(0,O.useRef)(null),[i,a]=(0,O.useState)(null),s=$(),p=(0,O.useCallback)(()=>{t(!1)},[t]),d=()=>{window.open("https://www.framer.com/help/articles/editor-bar","_blank"),p()};function m(){e.status==="success"&&(v("editor_bar_interaction",{page:"editor-bar-project-page",id:"editor-bar-open-project"}),window.open(`${C().app}/projects/${e.data.projectSlug}?node=${s}`,"FramerStudio"))}let g=()=>{v("editor_bar_interaction",{page:"editor-bar-menu",id:"editor-bar-hide"}),window.parent.postMessage({apiVersion:1,type:"editorBarHidden"},"*")};function l(S){let qe=setInterval(async()=>{S.closed&&(clearInterval(qe),await n(),a(null))},500)}async function x(S){if(i)return;v("editor_bar_interaction",{page:"editor-bar-guest-page",id:S==="login"?"editor-bar-login":"editor-bar-signup"});let J=window.open(`${C().login}?closeAfterSuccess=true`,"_blank");J&&(l(J),a(S))}return(0,f.jsxs)(b,{ref:o,className:De,direction:"column",gap:0,children:[e.status==="success"?(0,f.jsxs)(H,{onClick:m,highlight:!0,children:[(0,f.jsx)(M,{className:X}),"Edit in Framer"]}):(0,f.jsxs)(H,{onClick:()=>x("login"),highlight:!0,children:[(0,f.jsx)(M,{className:X}),"Login to Edit"]}),(0,f.jsx)("hr",{className:Ue}),(0,f.jsxs)(H,{onClick:g,children:[(0,f.jsx)(se,{}),"Hide for a week"]}),(0,f.jsxs)(H,{onClick:d,children:[(0,f.jsx)(ae,{}),"Learn more"]})]})}var F=r(c());function $e(){return(0,F.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",fill:"none",children:[(0,F.jsx)("title",{children:"Options"}),(0,F.jsx)("path",{d:"M 1 2.75 L 4 5.75 L 7 2.75",fill:"transparent",strokeWidth:"1.5",stroke:"#666",strokeLinecap:"round",strokeLinejoin:"round"})]})}var E=r(c());function Je(){let[t,e]=(0,h.useState)(!1),{access:n}=I(),o=n.userId??"null",i=(0,h.useCallback)(()=>{e(!0),window.parent.postMessage({apiVersion:1,type:"showMenu",userId:o},"*")},[o]),a=(0,h.useCallback)(()=>{e(!1),window.parent.postMessage({apiVersion:1,type:"closeMenu"},"*")},[]);return(0,h.useEffect)(()=>{let s=p=>{let d=p.data;typeof d=="object"&&d&&"type"in d&&"apiVersion"in d&&d.type==="closeMenu"&&d.apiVersion===1&&e(!1)};return window.addEventListener("message",s),()=>window.removeEventListener("message",s)},[]),{menuOpen:t,openMenu:i,closeMenu:a}}var He=(0,h.forwardRef)(({children:t,hidden:e},n)=>{let{menuOpen:o,openMenu:i,closeMenu:a}=Je(),s=(0,h.useRef)(null),{isMenuOpen:p,setIsMenuOpen:d}=z();(0,h.useEffect)(()=>{if(!o)return;let x=S=>{s.current?.contains(S.target)||(S.preventDefault(),a())};return window.addEventListener("click",x),()=>window.removeEventListener("click",x)},[o,a]);let m=()=>{o?a():i()},g=()=>{d(!0)},l=()=>{d(!1)};return D("editorBarSubtle")?(0,E.jsxs)(b,{direction:"row",alignItems:"center",gap:5,ref:n,className:Re,onMouseEnter:g,onMouseLeave:l,onTouchStart:g,children:[(0,E.jsx)(ne,{children:p&&(0,E.jsx)(re.div,{initial:{marginRight:-4,opacity:0},animate:{marginRight:0,opacity:1},exit:{marginRight:-4,opacity:0},children:(0,E.jsx)(je,{})})}),(0,E.jsx)(b,{children:(0,E.jsx)(b,{className:_e,direction:"row",alignItems:"center",gap:5,style:{display:e?"none":void 0},children:t})})]}):(0,E.jsxs)(b,{className:xe,ref:n,direction:"row",alignItems:"center",gap:5,style:{display:e?"none":void 0},children:[(0,E.jsxs)(y,{ref:s,className:ke,variant:"secondary",onClick:m,"aria-selected":o,testId:"editor-bar-menu",children:[(0,E.jsx)(M,{}),(0,E.jsx)($e,{})]}),t]})});var q=r(c()),Z=(0,u.createContext)({navigate:()=>{},isMenuOpen:!1,setIsMenuOpen:()=>{}});function W({access:t,isThankYou:e=!1,siteId:n}){if(D("editorBarSubtle"))return{Component:We,props:{}};switch(t.status){case"success":return{Component:Le,props:{access:t.data,isThankYou:e}};case"no-access":return{Component:Pe,props:{}};case"no-auth":return{Component:R,props:{isStorageAccessGranted:!0,isThankYou:e,siteId:n}};case"unknown":return{Component:R,props:{isStorageAccessGranted:!1,siteId:n}};case"error":return{props:{}};default:te(t)}}function Ke(t){let e=(0,u.useCallback)(async o=>{let i=o.offsetWidth,a=o.offsetHeight,s=5e3,p=100;return new Promise(d=>{let m=window.setTimeout(()=>{l.disconnect(),d()},s),g=oe(()=>{clearTimeout(m),l.disconnect(),d()},p),l=new ResizeObserver(()=>{(o.offsetWidth!==i||o.offsetHeight!==a)&&g()});l.observe(o)})},[]),n=({width:o,height:i,padding:a=0})=>{let s=`calc(50% - ${i/2+a}px)`,p="0%",d=`calc(50% - ${i/2+a}px)`,m=`calc(100% - ${o+a*2}px)`;return`inset(${s} ${p} ${d} ${m})`};return(0,u.useCallback)(async({onAbleToDraw:o,awaitOnBeginSizeMeasuring:i=!0,padding:a=0}={})=>{let s=t.current;if(!s)return;window.parent.postMessage({apiVersion:1,type:"beginSizeMeasuring"},"*"),i&&await e(document.body),o&&(o(),await e(s));let p=s.getBoundingClientRect(),d=getComputedStyle(s),m=n({width:Math.ceil(p.width),height:Math.ceil(p.height),padding:a});D("editorBarSubtle")?window.parent.postMessage({apiVersion:1,type:"updateStyle",clipPath:m},"*"):window.parent.postMessage({apiVersion:1,type:"updateStyle",background:d.background,borderRadius:d.borderRadius,height:Math.ceil(p.height),width:Math.ceil(p.width)},"*")},[t,e])}function ze(){let t=(0,u.useRef)(null),e=Ke(t),{access:n,siteId:o}=I(),[i,a]=(0,u.useState)(!1),[s,p]=(0,u.useState)(()=>W({access:n,siteId:o}));(0,u.useEffect)(()=>{e()},[e]);let d=(0,u.useCallback)(async l=>{await e({onAbleToDraw:()=>{p(l)}})},[e]),m=(0,u.useCallback)(async l=>{await e({onAbleToDraw:()=>{a(l)},awaitOnBeginSizeMeasuring:!1,padding:l?30:0})},[e]),g=(0,u.useMemo)(()=>({navigate:d,isMenuOpen:i,setIsMenuOpen:m}),[d,i,m]);return(0,q.jsx)(Z.Provider,{value:g,children:(0,q.jsx)(He,{ref:t,hidden:!s.Component,children:s.Component&&(0,q.jsx)(s.Component,{...s.props})})})}function j(){return(0,u.useContext)(Z).navigate}function z(){return(0,u.useContext)(Z)}var Y=r(c());function Ao({access:t,siteId:e}){return(0,ee.useEffect)(()=>{let n=window;window.parent.postMessage({apiVersion:1,type:"initializeController",jsUrl:n.controllerJsBundleURL,cssUrl:n.controllerCssBundleURL,trackingUrl:C().events},"*")},[]),(0,ee.useEffect)(()=>{G.setUserId(t.userId??"null")},[t.userId]),(0,Y.jsx)(Se,{children:(0,Y.jsx)(ve,{access:t,siteId:e,children:(0,Y.jsx)(ze,{})})})}export{Ao as EditorBar};
//# sourceMappingURL=https://app.framerstatic.com/EditorBar-IPNWYHYL.mjs.map
